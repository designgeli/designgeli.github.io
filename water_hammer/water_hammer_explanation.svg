<svg viewBox="0 0 1200 1600" xmlns="http://www.w3.org/2000/svg">
  <!-- 標題 -->
  <text x="600" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    水錘效應 (Water Hammer Effect) 原理圖解
  </text>
  
  <!-- 圖1: 正常流動狀態 -->
  <g id="normal-flow">
    <rect x="50" y="80" width="1100" height="280" fill="#f0f8ff" stroke="#333" stroke-width="2" rx="10"/>
    <text x="600" y="110" font-size="20" font-weight="bold" text-anchor="middle" fill="#0066cc">
      階段1：正常流動狀態
    </text>
    
    <!-- 管道 -->
    <rect x="100" y="160" width="800" height="80" fill="#e8e8e8" stroke="#333" stroke-width="3"/>
    <rect x="100" y="200" width="800" height="40" fill="#4a90e2" opacity="0.7"/>
    
    <!-- 水流箭頭 -->
    <defs>
      <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
        <path d="M0,0 L0,6 L9,3 z" fill="#0066cc" />
      </marker>
    </defs>
    
    <line x1="150" y1="220" x2="250" y2="220" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    <line x1="300" y1="220" x2="400" y2="220" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    <line x1="450" y1="220" x2="550" y2="220" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    <line x1="600" y1="220" x2="700" y2="220" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    
    <!-- 閥門（開啟） -->
    <g id="valve-open">
      <rect x="900" y="180" width="60" height="60" fill="#66cc66" stroke="#333" stroke-width="3"/>
      <circle cx="930" cy="210" r="20" fill="white" stroke="#333" stroke-width="2"/>
      <line x1="930" y1="195" x2="930" y2="225" stroke="#333" stroke-width="3"/>
    </g>
    
    <!-- 出水口 -->
    <path d="M 960 200 Q 1000 200 1020 220 Q 1000 240 960 240" fill="#4a90e2" opacity="0.5"/>
    
    <text x="600" y="300" font-size="16" text-anchor="middle" fill="#333">
      水流穩定流動，壓力均勻分布
    </text>
    <text x="600" y="330" font-size="16" text-anchor="middle" fill="#666">
      流速: v = 穩定 | 壓力: P = 正常
    </text>
  </g>
  
  <!-- 圖2: 閥門突然關閉 -->
  <g id="valve-closing">
    <rect x="50" y="400" width="1100" height="280" fill="#fff8f0" stroke="#333" stroke-width="2" rx="10"/>
    <text x="600" y="430" font-size="20" font-weight="bold" text-anchor="middle" fill="#e63946">
      階段2：閥門突然關閉
    </text>
    
    <!-- 管道 -->
    <rect x="100" y="480" width="800" height="80" fill="#e8e8e8" stroke="#333" stroke-width="3"/>
    <rect x="100" y="520" width="800" height="40" fill="#4a90e2" opacity="0.7"/>
    
    <!-- 水流箭頭（減速） -->
    <line x1="150" y1="540" x2="230" y2="540" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    <line x1="300" y1="540" x2="360" y2="540" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    <line x1="450" y1="540" x2="490" y2="540" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowblue)"/>
    
    <!-- 壓力波 -->
    <defs>
      <marker id="arrowred" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
        <path d="M9,0 L9,6 L0,3 z" fill="#e63946" />
      </marker>
    </defs>
    <line x1="850" y1="540" x2="650" y2="540" stroke="#e63946" stroke-width="6" marker-end="url(#arrowred)" stroke-dasharray="10,5"/>
    <text x="750" y="520" font-size="14" fill="#e63946" font-weight="bold">壓力波回傳</text>
    
    <!-- 閥門（關閉） -->
    <g id="valve-closed">
      <rect x="900" y="500" width="60" height="60" fill="#e63946" stroke="#333" stroke-width="3"/>
      <circle cx="930" cy="530" r="20" fill="white" stroke="#333" stroke-width="2"/>
      <line x1="915" y1="515" x2="945" y2="545" stroke="#333" stroke-width="3"/>
    </g>
    
    <!-- 衝擊標示 -->
    <circle cx="920" cy="530" r="35" fill="none" stroke="#ff0000" stroke-width="3" opacity="0.6"/>
    <circle cx="920" cy="530" r="50" fill="none" stroke="#ff0000" stroke-width="2" opacity="0.3"/>
    
    <text x="600" y="620" font-size="16" text-anchor="middle" fill="#333">
      水流突然停止，動能轉換為壓力能
    </text>
    <text x="600" y="650" font-size="16" text-anchor="middle" fill="#e63946" font-weight="bold">
      流速: v → 0 | 壓力: P ↑↑ (瞬間激增)
    </text>
  </g>
  
  <!-- 圖3: 壓力波反彈 -->
  <g id="pressure-wave">
    <rect x="50" y="720" width="1100" height="300" fill="#f0fff0" stroke="#333" stroke-width="2" rx="10"/>
    <text x="600" y="750" font-size="20" font-weight="bold" text-anchor="middle" fill="#ff6b35">
      階段3：壓力波傳遞與反彈
    </text>
    
    <!-- 管道 -->
    <rect x="100" y="800" width="800" height="80" fill="#e8e8e8" stroke="#333" stroke-width="3"/>
    
    <!-- 高壓區域 -->
    <rect x="700" y="820" width="200" height="40" fill="#ff6b35" opacity="0.6"/>
    <text x="800" y="845" font-size="14" text-anchor="middle" fill="white" font-weight="bold">高壓區</text>
    
    <!-- 正常壓力區域 -->
    <rect x="100" y="820" width="300" height="40" fill="#4a90e2" opacity="0.6"/>
    <text x="250" y="845" font-size="14" text-anchor="middle" fill="white">正常壓力</text>
    
    <!-- 過渡區域 -->
    <defs>
      <linearGradient id="pressureGradient" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:#4a90e2;stop-opacity:0.6" />
        <stop offset="100%" style="stop-color:#ff6b35;stop-opacity:0.6" />
      </linearGradient>
    </defs>
    <rect x="400" y="820" width="300" height="40" fill="url(#pressureGradient)"/>
    
    <!-- 壓力波動箭頭 -->
    <path d="M 850 840 Q 750 800 650 840 Q 550 880 450 840 Q 350 800 250 840" 
          fill="none" stroke="#ff6b35" stroke-width="4" stroke-dasharray="5,5"/>
    <text x="550" y="785" font-size="14" fill="#ff6b35" font-weight="bold">← 壓力波傳播</text>
    
    <!-- 閥門 -->
    <rect x="900" y="820" width="60" height="60" fill="#e63946" stroke="#333" stroke-width="3"/>
    
    <text x="600" y="930" font-size="16" text-anchor="middle" fill="#333">
      壓力波以聲速在管道中傳播，遇到障礙物反彈
    </text>
    <text x="600" y="960" font-size="16" text-anchor="middle" fill="#666">
      波速 ≈ 1000-1400 m/s (水中聲速)
    </text>
    <text x="600" y="990" font-size="16" text-anchor="middle" fill="#ff6b35" font-weight="bold">
      反覆振盪造成「砰砰」聲響和管道震動
    </text>
  </g>
  
  <!-- 圖4: 危害說明 -->
  <g id="damages">
    <rect x="50" y="1060" width="1100" height="500" fill="#fff0f0" stroke="#333" stroke-width="2" rx="10"/>
    <text x="600" y="1090" font-size="20" font-weight="bold" text-anchor="middle" fill="#d62828">
      水錘效應的危害
    </text>
    
    <!-- 危害1: 管道破裂 -->
    <g transform="translate(150, 1130)">
      <rect x="0" y="0" width="280" height="180" fill="white" stroke="#d62828" stroke-width="2" rx="5"/>
      <text x="140" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="#d62828">
        1. 管道損壞
      </text>
      <rect x="40" y="50" width="200" height="30" fill="#e8e8e8" stroke="#333" stroke-width="2"/>
      <path d="M 140 50 L 140 80 M 135 50 L 145 50 M 135 80 L 145 80" stroke="#ff0000" stroke-width="3"/>
      <text x="140" y="105" font-size="12" text-anchor="middle">管壁裂縫</text>
      <text x="140" y="135" font-size="13" text-anchor="middle" fill="#666">
        • 接頭鬆脫
      </text>
      <text x="140" y="155" font-size="13" text-anchor="middle" fill="#666">
        • 管道破裂
      </text>
    </g>
    
    <!-- 危害2: 閥門損壞 -->
    <g transform="translate(480, 1130)">
      <rect x="0" y="0" width="280" height="180" fill="white" stroke="#d62828" stroke-width="2" rx="5"/>
      <text x="140" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="#d62828">
        2. 閥門與設備損壞
      </text>
      <rect x="100" y="50" width="40" height="40" fill="#e63946" stroke="#333" stroke-width="2"/>
      <circle cx="120" cy="70" r="12" fill="white" stroke="#333" stroke-width="2"/>
      <line x1="125" y1="65" x2="115" y2="75" stroke="#ff0000" stroke-width="3"/>
      <text x="140" y="110" font-size="12" text-anchor="middle">閥門損壞</text>
      <text x="140" y="135" font-size="13" text-anchor="middle" fill="#666">
        • 密封件破損
      </text>
      <text x="140" y="155" font-size="13" text-anchor="middle" fill="#666">
        • 蓮蓬頭故障
      </text>
    </g>
    
    <!-- 危害3: 噪音振動 -->
    <g transform="translate(810, 1130)">
      <rect x="0" y="0" width="280" height="180" fill="white" stroke="#d62828" stroke-width="2" rx="5"/>
      <text x="140" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="#d62828">
        3. 噪音與振動
      </text>
      <path d="M 100 70 Q 120 50 140 70 Q 160 90 180 70" fill="none" stroke="#ff6b35" stroke-width="3"/>
      <path d="M 100 80 Q 120 100 140 80 Q 160 60 180 80" fill="none" stroke="#ff6b35" stroke-width="3"/>
      <text x="140" y="110" font-size="20" text-anchor="middle">♪ ♫</text>
      <text x="140" y="135" font-size="13" text-anchor="middle" fill="#666">
        • 砰砰巨響
      </text>
      <text x="140" y="155" font-size="13" text-anchor="middle" fill="#666">
        • 管道震動
      </text>
    </g>
    
    <!-- 壓力公式 -->
    <g transform="translate(150, 1340)">
      <rect x="0" y="0" width="900" height="180" fill="#f8f8f8" stroke="#666" stroke-width="2" rx="5"/>
      <text x="450" y="30" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
        水錘壓力計算 (Joukowsky 公式)
      </text>
      <text x="450" y="70" font-size="22" text-anchor="middle" fill="#0066cc" font-weight="bold">
        ΔP = ρ × c × Δv
      </text>
      <text x="450" y="105" font-size="14" text-anchor="middle" fill="#666">
        ΔP = 壓力升高 (Pa) | ρ = 水密度 (1000 kg/m³) | c = 聲速 (~1400 m/s) | Δv = 流速變化 (m/s)
      </text>
      <text x="450" y="135" font-size="15" text-anchor="middle" fill="#e63946" font-weight="bold">
        範例: 若流速從 2 m/s 驟降為 0，壓力可瞬間增加 28 bar (≈280 m 水柱)!
      </text>
      <text x="450" y="160" font-size="13" text-anchor="middle" fill="#666">
        這是正常水壓 (2-4 bar) 的 7-14 倍！
      </text>
    </g>
  </g>
</svg>